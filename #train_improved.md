 # ============================================
  # train_improved.py å‘½ä»¤è¡Œå‚æ•°å¿«é€Ÿå‚è€ƒ
  # ============================================


å‘½ä»¤è¡Œå‚æ•°

  python3 train_improved.py --help

  # å¯ç”¨å‚æ•°ï¼š
  --label-path          # æ ‡ç­¾æ–‡ä»¶è·¯å¾„
  --samples-per-class   # æ¯ç±»é‡‡æ ·æ•°é‡
  --cache-dir           # ç¼“å­˜ç›®å½•
  --no-cache            # ä¸ä½¿ç”¨ç¼“å­˜
  --force-regenerate    # å¼ºåˆ¶é‡æ–°ç”Ÿæˆç¼“å­˜
  --experiment-name     # å®éªŒåç§°

  3. ä¿å­˜çš„æ–‡ä»¶
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚           æ–‡ä»¶            â”‚               å†…å®¹               â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ best_model.pth            â”‚ æœ€ä½³æ¨¡å‹æƒé‡                     â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ training_history.json     â”‚ è®­ç»ƒå†å²ï¼ˆloss, acc, f1ï¼‰        â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ test_results.json         â”‚ æµ‹è¯•ç»“æœï¼ˆé¢„æµ‹ã€æ ‡ç­¾ã€grid_idsï¼‰ â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ classification_report.txt â”‚ è¯¦ç»†åˆ†ç±»æŠ¥å‘Š                     â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ confusion_matrix.jpg      â”‚ æ··æ·†çŸ©é˜µå¯è§†åŒ–                   â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ experiment.log            â”‚ å®Œæ•´è®­ç»ƒæ—¥å¿—                     â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ config.json               â”‚ å®éªŒé…ç½®å‚æ•°                     â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ EXPERIMENT_SUMMARY.txt    â”‚ å®éªŒæ€»ç»“æŠ¥å‘Š                     â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ labels_used.csv           â”‚ ä½¿ç”¨çš„æ ‡ç­¾æ•°æ®                   â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  4. ä½¿ç”¨ç¤ºä¾‹

  # åŸºæœ¬ä½¿ç”¨
  python3 train_improved.py

  # ä½¿ç”¨ä¸åŒæ ‡ç­¾æ–‡ä»¶
  python3 train_improved.py --label-path data/labels_copy.csv

  # è‡ªå®šä¹‰å®éªŒåç§°
  python3 train_improved.py --experiment-name my_experiment

  # ä½¿ç”¨é‡‡æ ·æ•°æ®
  python3 train_improved.py --samples-per-class 100

  # å¼ºåˆ¶é‡æ–°ç”Ÿæˆç¼“å­˜
  python3 train_improved.py --force-regenerate

  # ç»„åˆä½¿ç”¨
  python3 train_improved.py \
      --label-path data/labels_copy.csv \
      --experiment-name custom_exp \
      --samples-per-class 



  # 1. åŸºæœ¬ä½¿ç”¨
  python3 train_improved.py                                    # ä½¿ç”¨é»˜è®¤è®¾ç½®

  # 2. é€‰æ‹©ä¸åŒçš„æ ‡ç­¾æ–‡ä»¶ï¼ˆè‡ªåŠ¨ä½¿ç”¨å¯¹åº”ç¼“å­˜ï¼‰
  python3 train_improved.py --label-path data/labels_1w.csv   # ä½¿ç”¨ labels_1w.csv
  python3 train_improved.py --label-path data/labels_2w.csv   # ä½¿ç”¨ labels_2w.csv

  # 3. ç¼“å­˜ç®¡ç†
  python3 train_improved.py --force-regenerate                # å¼ºåˆ¶é‡æ–°ç”Ÿæˆç¼“å­˜
  python3 train_improved.py --no-cache                        # ä¸ä½¿ç”¨ç¼“å­˜
  python3 train_improved.py --cache-dir /tmp/cache            # ä½¿ç”¨å…¶ä»–ç¼“å­˜ç›®å½•

  # 4. æ•°æ®é‡‡æ ·
  python3 train_improved.py --samples-per-class 100           # æ¯ç±»100ä¸ªæ ·æœ¬
  python3 train_improved.py --samples-per-class 500           # æ¯ç±»500ä¸ªæ ·æœ¬

  # 5. ç»„åˆä½¿ç”¨
  python3 train_improved.py \
      --label-path data/labels_custom.csv \
      --force-regenerate \
      --samples-per-class 200

  # 6. æŸ¥çœ‹å¸®åŠ©
  python3 train_improved.py --help

  ---
  ğŸ¯ å¸¸è§ä½¿ç”¨åœºæ™¯

  åœºæ™¯1: æˆ‘æƒ³ä½¿ç”¨ç°æœ‰çš„æŸä¸ªç¼“å­˜

  # 1. æŸ¥çœ‹æœ‰å“ªäº›ç¼“å­˜
  ls -lh data/cache/*.pkl

  # 2. æŸ¥çœ‹ç¼“å­˜å¯¹åº”çš„æ ‡ç­¾æ–‡ä»¶
  cat data/cache/dual_year_data_fef4c5f3afb9_info.txt | grep "Label file"
  # è¾“å‡º: Label file: data/labels.csv

  # 3. ä½¿ç”¨è¯¥ç¼“å­˜è®­ç»ƒ
  python3 train_improved.py --label-path data/labels.csv

  åœºæ™¯2: æˆ‘ä¿®æ”¹äº†æ ‡ç­¾æ–‡ä»¶ï¼Œæƒ³ç”¨æ–°æ•°æ®è®­ç»ƒ

  # 1. ä¿®æ”¹æ ‡ç­¾æ–‡ä»¶
  vim data/labels.csv

  # 2. ç›´æ¥è¿è¡Œï¼ˆä¼šè‡ªåŠ¨æ£€æµ‹å˜åŒ–å¹¶ç”Ÿæˆæ–°ç¼“å­˜ï¼‰
  python3 train_improved.py --label-path data/labels.csv

  åœºæ™¯3: æˆ‘æƒ³æµ‹è¯•ä¸åŒçš„æ ‡ç­¾æ–‡ä»¶

  # æµ‹è¯• labels_1w.csv
  python3 train_improved.py --label-path data/labels_1w.csv

  # æµ‹è¯• labels_2w.csv
  python3 train_improved.py --label-path data/labels_2w.csv

  # æ¯ä¸ªæ ‡ç­¾æ–‡ä»¶ä¼šè‡ªåŠ¨ä½¿ç”¨å¯¹åº”çš„ç¼“å­˜

  åœºæ™¯4: æˆ‘æƒ³å¿«é€Ÿæµ‹è¯•ï¼ˆä½¿ç”¨é‡‡æ ·æ•°æ®ï¼‰

  # æ¯ç±»åªç”¨100ä¸ªæ ·æœ¬ï¼Œå¿«é€Ÿæµ‹è¯•
  python3 train_improved.py --samples-per-class 100

  ---
  ğŸ’¡ æç¤º

  1. ç¼“å­˜ä¼šè‡ªåŠ¨ç®¡ç†ï¼šç³»ç»Ÿä¼šæ ¹æ®æ ‡ç­¾æ–‡ä»¶å†…å®¹è‡ªåŠ¨é€‰æ‹©æˆ–ç”Ÿæˆç¼“å­˜
  2. ä¸éœ€è¦æ‰‹åŠ¨æŒ‡å®šç¼“å­˜æ–‡ä»¶ï¼šåªéœ€æŒ‡å®šæ ‡ç­¾æ–‡ä»¶è·¯å¾„å³å¯
  3. ç¼“å­˜æ–‡ä»¶ååŒ…å«å“ˆå¸Œï¼šç¡®ä¿ä¸åŒæ•°æ®ä½¿ç”¨ä¸åŒç¼“å­˜
  4. æ—§ç¼“å­˜ä¸ä¼šè‡ªåŠ¨åˆ é™¤ï¼šéœ€è¦æ‰‹åŠ¨æ¸…ç† data/cache/ ç›®å½•

  ç°åœ¨ä½ å¯ä»¥è½»æ¾åœ°åœ¨ä¸åŒçš„ç¼“å­˜/æ ‡ç­¾æ–‡ä»¶ä¹‹é—´åˆ‡æ¢è®­ç»ƒäº†ï¼ğŸ‰